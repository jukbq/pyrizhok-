<section>

    <h2>Категорії страв</h2>

    <button (click)="active_form = !active_form" class="btn" data-rel="address" type="button">
        {{ !active_form? "ДОДАТИ МЕНЮ" : "ВІДМІНИТИ" }}
    </button>

    <table [ngClass]="{ active: active_form }" class="table">
        <thead>
            <tr>
                <th scope="col">№</th>
                <th scope="col">Індекс</th>
                <th scope="col">Страва</th>
                <th scope="col">Назва категорії</th>
                <th scope="col">Зображення</th>
                <th scope="col">Дії</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let categori of categoriesDishes; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ categori.categoryIndex}}</td>
                <td>{{categori.dishes.dishesName}}</td>
                <td>{{categori.categoryName }}</td>
                <td class="image">
                    <img [src]="categori.image" />
                </td>
                <td class="btn_tr">
                    <a (click)="editDishes(categori)" type="button" title="Редагувати">
                        <img src="https://firebasestorage.googleapis.com/v0/b/final-project-393613.appspot.com/o/icon%2Fedit.svg?alt=media&token=2c3ab95d-c6f0-4f36-9127-626674e9d9ab&_gl=1*96vw8j*_ga*MzkwMTAyNDg5LjE2ODc3NzIwMTI.*_ga_CW55HF8NVT*MTY5NjkyMDIxNS4zMzAuMS4xNjk2OTIwMjcyLjMuMC4w"
                            alt="">
                    </a>
                    <a (click)="delCategori(categori)" type="button" title="Видалити">
                        <img src="https://firebasestorage.googleapis.com/v0/b/final-project-393613.appspot.com/o/icon%2Fdel.svg?alt=media&token=5765a105-be2a-4537-b99e-b5f0447c88a4&_gl=1*12xf5iz*_ga*MzkwMTAyNDg5LjE2ODc3NzIwMTI.*_ga_CW55HF8NVT*MTY5NjkyMDIxNS4zMzAuMS4xNjk2OTIwNDI2LjYwLjAuMA.."
                            alt="">
                    </a>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="form_conteiner" [ngClass]="{ active: !active_form }">
        <form [formGroup]="categoriesDishesForm" (ngSubmit)="creatCategories()" class="form_category">
            <div class="input_section">
                <select formControlName="dishes" name="dishes" class="form-select">
                    <option [ngValue]="menu" *ngFor="let menu of dishes">
                        {{ menu.dishesName }}
                    </option>
                </select>

                <input formControlName="categoryIndex" type="number" name="categoryIndex" class="form-control"
                    placeholder="*Порядок категорії" aria-label="Порядок категорії" />
                <input formControlName="categoryName" type="text" name="categoryName" class="form-control"
                    placeholder="*Назва" aria-label="Назва" (input)="onCategoriesNameInput($event)" />
                <input formControlName="categoryLink" type="text" name="categoryLink" class="form-control"
                    placeholder="*Щлях" aria-label="шлях" />
            </div>

            <div class="load_file">
                <input class="form-control form-control-lg" type="file" (change)="uploadDishesImage($event)" />
            </div>

            <div class="progress_line">
                <div class="progress">
                    <div class="progress-bar progress-bar-striped" role="progressbar"
                        aria-label="Default striped example" [style.width.%]="uploadPercent" aria-valuemin="0"
                        aria-valuemax="100"></div>
                </div>
            </div>

            <div class="image_block">
                <td class="image">
                    <img [src]="valueByControlDishes('image')">
                </td>
            </div>

            <div class="batton_section">
                <button [disabled]="categoriesDishesForm.invalid" type="submit" class="btn">
                    {{ categories_edit_status ? "Зберегти" : "Додати" }}
                </button>
                <button (click)="deleteImage()" type="submit" class="btn">
                    Видалити
                </button>
            </div>

        </form>
    </div>

</section>